<div class="p-4 sm:p-6 lg:p-8 max-w-4xl mx-auto">
  <div class="text-center mb-8">
    <h2 class="text-3xl font-extrabold text-slate-100">AI Symptom Checker</h2>
    <p class="mt-2 text-md text-slate-300">
      Describe your symptoms, and our AI assistant will provide potential insights and topics to discuss with your doctor.
    </p>
  </div>

  <div class="bg-slate-800 rounded-lg shadow-xl p-6 sm:p-8">
    <div class="space-y-4">
      <label for="symptoms" class="block text-sm font-medium text-slate-300">Enter symptoms (e.g., "headache, fever, and sore throat"):</label>
      <textarea 
        id="symptoms" 
        rows="5" 
        class="w-full p-3 bg-slate-700 border border-slate-600 text-slate-200 placeholder-slate-400 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 transition"
        placeholder="Please be as detailed as possible..."
        [value]="symptoms()"
        (input)="onSymptomsInput($event)"></textarea>

      <button
        (click)="checkSymptoms()"
        [disabled]="status() === 'loading' || !symptoms().trim()"
        class="w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-indigo-500 disabled:bg-slate-600 disabled:cursor-not-allowed transition-colors">
        @if (status() === 'loading') {
          <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          Analyzing...
        } @else {
          Analyze Symptoms
        }
      </button>
    </div>
  </div>

  @if (status() === 'success' || status() === 'error') {
    <div class="mt-8 bg-slate-800 rounded-lg shadow-xl p-6 sm:p-8">
      <h3 class="text-xl font-bold text-slate-100 mb-4">Analysis Result</h3>
      
      @if (status() === 'success') {
        @if (parsedResponse().disclaimer) {
          <div class="mb-6 p-4 border-l-4 border-red-500 bg-red-900/50 rounded-r-lg">
            <p class="font-bold text-red-300">{{ parsedResponse().disclaimer }}</p>
          </div>
        }
        <div class="text-slate-300 space-y-2" [innerHTML]="parsedResponse().content"></div>
      } @else {
        <div class="p-4 border-l-4 border-yellow-500 bg-yellow-900/50 text-yellow-300 rounded-r-lg">
          <p>{{ response() }}</p>
        </div>
      }
    </div>
  }
</div>